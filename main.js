(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o,r,i,c,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._cardSelector=n,this._cardData=o,this._currentUser=r,this._handleLikeClick=i,this._handleDeleteClick=c,this._handleCardClick=a}var n,o;return n=t,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(this._config.cardSelector).cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(this._config.likeSelector).addEventListener("click",(function(){e._handleLikeClick()})),this._element.querySelector(this._config.placeDeleteSelector).addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(this._config.placeImageSelector).addEventListener("click",(function(){e._handleCardClick(e._cardData.link,e._cardData.name)}))}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"updateLike",value:function(e){this._element.querySelector(".place__like").classList.toggle(this._config.likeActiveClass),this._element.querySelector(".place__likes").textContent=e.likes.length}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._getTemplate(),this._setEventListeners(),this._element.querySelector(this._config.placeTitleSelector).textContent=this._cardData.name,this._element.querySelector(this._config.placeImageSelector).src=this._cardData.link,this._element.querySelector(this._config.placeImageSelector).alt=this._cardData.name,this._element.querySelector(".place__likes").textContent=this._cardData.likes.length,this._cardData.likes.some((function(t){return t._id===e._currentUser._id}))&&this._element.querySelector(".place__like").classList.add(this._config.likeActiveClass),this._cardData.owner._id===this._currentUser._id&&this._element.querySelector(".place__delete").classList.add("place__delete_active"),this._element}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_hideInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",e.classList.remove(r._config.errorInputClass),t.classList.remove(r._config.errorActiveClass)})),o(this,"_showInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,e.classList.add(r._config.errorInputClass),t.classList.add(r._config.errorActiveClass)})),o(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),o(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),o(this,"toggleButtonState",(function(){r._hasInvalidInput()?r._buttonElement.disabled=!0:r._buttonElement.disabled=!1})),o(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleButtonState()}))}))})),o(this,"enableValidation",(function(){r._setEventListeners()})),this._config=t,this._formElement=document.querySelector(n),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitSelector)}var t,r;return t=e,(r=[{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this.toggleButtonState()}}])&&n(t.prototype,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemArray=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._itemArray.forEach((function(t){e._renderer(t)}))}},{key:"addInitialItems",value:function(e){this._container.append(e)}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._popup=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._config.popupActiveClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._config.popupActiveClass),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.key===this._config.ESCAPE_KEY&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(this._config.closeButtonSelector).addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target===e._popup&&e.close()}))}}])&&a(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(r){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,t))._popupImg=document.querySelector(n._config.popupPhotoImgSelector),n._popupTitle=document.querySelector(n._config.popupPhotoTitleSelector),n}return t=c,(n=[{key:"open",value:function(e,t){f(d(c.prototype),"open",this).call(this),this._popupImg.src=e,this._popupImg.alt=t,this._popupTitle.textContent=t}}])&&s(t.prototype,n),c}(u);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(r){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function c(e,t){var n,o=t.popupSelector,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,o))._handleFormSubmit=r,n._inputList=n._popup.querySelectorAll(n._config.inputSelector),n._form=n._popup.querySelector(n._config.formSelector),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.id]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;v(g(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){v(g(c.prototype),"close",this).call(this),this._form.reset()}}])&&m(t.prototype,n),c}(u);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(r){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e,t)}return t=c,(n=[{key:"setEventListeners",value:function(){var e=this;w(O(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._test(),e.close()}))}},{key:"setConfirmHandler",value:function(e){return this._test=e}}])&&C(t.prototype,n),c}(u);function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var T=function(){function e(t){var n=t.nameSelector,o=t.jobSelector,r=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(o),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userValues={},this._userValues[this._name.id]=this._name.textContent,this._userValues[this._job.id]=this._job.textContent,this._userValues}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar}}])&&I(t.prototype,n),e}();function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=document.querySelector(".profile__button_type_user"),U=document.querySelector(".profile__button_type_place"),R=document.querySelector(".profile__avatar"),D=document.querySelector(".popup__input_name"),x=document.querySelector(".popup__input_job"),V={errorActiveClass:"popup__input-error_active",errorInputClass:"popup__input_invalid",errorInputSelector:".popup__input-error",inputSelector:".popup__input",submitSelector:".popup__submit",profileEditorSelector:".profile-editor",placeEditorSelector:".place-editor",avatarEditorSelector:".avatar-editor",nameSelector:".profile__name",jobSelector:".profile__job",cardTemplateDefault:".card-template_type_default",cardsContainerSelector:".places",popupPhotoSelector:"#photo",popupProfileSelector:"#profile",popupPlaceSelector:"#newplace",popupAvatarSelector:"#avatar",poupDeleteSelector:"#delete",cardSelector:".place",likeSelector:".place__like",likeActiveClass:"place__like_active",placeDeleteSelector:".place__delete",placeImageSelector:".place__image",placeTitleSelector:".place__title",popupActiveClass:"popup_opened",ESCAPE_KEY:"Escape",closeButtonSelector:".popup__close",formSelector:".form",popupPhotoImgSelector:".popup__img",popupPhotoTitleSelector:".popup__title-img",avatarSelector:".profile__avatar",methodGET:"GET",methodPUT:"PUT",methodDELETE:"DELETE",methodPATCH:"PATCH",methodPOST:"POST",urlLikes:"/cards/likes/",urlMe:"/users/me",urlCards:"/cards/",urlAvatar:"/users/me/avatar",token:"4caf9c4d-a302-411a-9ffa-2ef00699d265",loadingText:"Сохранение..."};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var o,r,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);c=!0);}catch(e){a=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function F(e,n){var o=new t(V,V.cardTemplateDefault,e,n,(function(){e.likes.some((function(e){return e._id===n._id}))?X.updateLike(V.urlLikes,V.methodDELETE,V.token,e._id).then((function(t){return o.updateLike(t),e.likes=t.likes})).catch((function(e){console.log(e)})):X.updateLike(V.urlLikes,V.methodPUT,V.token,e._id).then((function(t){return o.updateLike(t),e.likes=t.likes})).catch((function(e){console.log(e)}))}),(function(){W.setConfirmHandler((function(){X.deleteCard(V.urlCards,V.methodDELETE,V.token,e._id).then((function(){o.deleteCard()})).catch((function(e){console.log(e)})).finally((function(){W.close()}))})),W.open()}),(function(e,t){K.open(e,t)}));return o.generateCard()}A.addEventListener("click",(function(){var e;e=G.getUserInfo(),D.value=e.name,x.value=e.about,H.resetValidation(),Y.open()})),U.addEventListener("click",(function(){M.resetValidation(),$.open()})),R.addEventListener("click",(function(){N.resetValidation(),Q.open()}));var H=new r(V,V.profileEditorSelector),M=new r(V,V.placeEditorSelector),N=new r(V,V.avatarEditorSelector),G=new T({nameSelector:V.nameSelector,jobSelector:V.jobSelector,avatarSelector:V.avatarSelector}),J=new c({items:[],renderer:function(e){J.addItem(F(e))}},V.cardsContainerSelector),K=new _(V,V.popupPhotoSelector),Y=new k(V,{popupSelector:V.popupProfileSelector,handleFormSubmit:function(e){X.submitStart(Y._form),X.patchUserInfo(V.urlMe,V.methodPATCH,V.token,e).then((function(e){G.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){Y.close(),X.submitEnd(Y._form)}))}}),$=new k(V,{popupSelector:V.popupPlaceSelector,handleFormSubmit:function(e){X.submitStart($._form),Promise.all([X.getUserInfo(V.urlMe,V.methodGET,V.token),X.postNewCard(V.urlCards,V.methodPOST,V.token,çitem)]).then((function(e){var t=B(e,2),n=t[0],o=t[1];J.addItem(F(o,n))})).catch((function(e){console.log(e)})).finally((function(){$.close(),X.submitEnd($._form)}))}}),Q=new k(V,{popupSelector:V.popupAvatarSelector,handleFormSubmit:function(e){X.submitStart(Q._form),X.patchUserAvatar(V.urlAvatar,V.methodPATCH,V.token,e.url).then((function(e){G.setUserAvatar(e)})).catch((function(e){console.log(e)})).finally((function(){Q.close(),X.submitEnd(Q._form)}))}}),W=new L(V,V.poupDeleteSelector),X=new function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"_search",(function(e,t,n){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"}})})),q(this,"_searchCardId",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e).concat(r),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"}})})),q(this,"submitStart",(function(e){return o._text=e.querySelector(o._config.submitSelector).textContent,e.querySelector(o._config.submitSelector).textContent=o._config.loadingText,o._text})),q(this,"submitEnd",(function(e){e.querySelector(o._config.submitSelector).textContent=o._text})),q(this,"getUserInfo",(function(e,t,n){return o._search(e,t,n).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"getInitialCards",(function(e,t,n){return o._search(e,t,n).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"patchUserInfo",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(r.name),about:"".concat(r.about)})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"postNewCard",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(r.place),link:"".concat(r.url)})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"deleteCard",(function(e,t,n,r){return o._searchCardId(e,t,n,r).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"updateLike",(function(e,t,n,r){return o._searchCardId(e,t,n,r).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),q(this,"patchUserAvatar",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(r)})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))})),this._config=t,this._option=n}(V,{baseUrl:"https://mesto.nomoreparties.co/v1/cohort-25",method:"",headers:{authorization:V.token,"Content-Type":"application/json"}});H.enableValidation(),M.enableValidation(),N.enableValidation(),Y.setEventListeners(),$.setEventListeners(),Q.setEventListeners(),K.setEventListeners(),W.setEventListeners(),J.renderItems(),Promise.all([X.getUserInfo(V.urlMe,V.methodGET,V.token),X.getInitialCards(V.urlCards,V.methodGET,V.token)]).then((function(e){var t=B(e,2),n=t[0],o=t[1];G.setUserInfo(n),G.setUserAvatar(n),o.forEach((function(e){J.addInitialItems(F(e,n))}))})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25maWciLCJjYXJkU2VsZWN0b3IiLCJjYXJkRGF0YSIsImN1cnJlbnRVc2VyIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2NvbmZpZyIsIl9jYXJkU2VsZWN0b3IiLCJfY2FyZERhdGEiLCJfY3VycmVudFVzZXIiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsImxpa2VTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGFjZURlbGV0ZVNlbGVjdG9yIiwicGxhY2VJbWFnZVNlbGVjdG9yIiwibGluayIsIm5hbWUiLCJyZW1vdmUiLCJsaWtlcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxpa2VBY3RpdmVDbGFzcyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicGxhY2VUaXRsZVNlbGVjdG9yIiwic3JjIiwiYWx0Iiwic29tZSIsIml0ZW0iLCJfaWQiLCJhZGQiLCJvd25lciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVyb3JyRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiZXJyb3JJbnB1dENsYXNzIiwiZXJyb3JBY3RpdmVDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9pbnB1dExpc3QiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdFNlbGVjdG9yIiwiaW5wdXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1BcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJwb3B1cEFjdGl2ZUNsYXNzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIkVTQ0FQRV9LRVkiLCJjbG9zZSIsImNsb3NlQnV0dG9uU2VsZWN0b3IiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltZyIsInBvcHVwUGhvdG9JbWdTZWxlY3RvciIsIl9wb3B1cFRpdGxlIiwicG9wdXBQaG90b1RpdGxlU2VsZWN0b3IiLCJpbWFnZSIsInRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiZm9ybVNlbGVjdG9yIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cENvbmZpcm0iLCJfdGVzdCIsImZ1bmMiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZSIsIl9qb2IiLCJfYXZhdGFyIiwiX3VzZXJWYWx1ZXMiLCJ1c2VySW5wdXQiLCJhYm91dCIsImF2YXRhcklucHV0IiwiYXZhdGFyIiwicG9wdXBCdXR0b25Qcm9maWxlIiwicG9wdXBCdXR0b25QbGFjZSIsInBvcHVwQnV0dG9uQXZhdGFyIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJlcnJvcklucHV0U2VsZWN0b3IiLCJwcm9maWxlRWRpdG9yU2VsZWN0b3IiLCJwbGFjZUVkaXRvclNlbGVjdG9yIiwiYXZhdGFyRWRpdG9yU2VsZWN0b3IiLCJjYXJkVGVtcGxhdGVEZWZhdWx0IiwiY2FyZHNDb250YWluZXJTZWxlY3RvciIsInBvcHVwUGhvdG9TZWxlY3RvciIsInBvcHVwUHJvZmlsZVNlbGVjdG9yIiwicG9wdXBQbGFjZVNlbGVjdG9yIiwicG9wdXBBdmF0YXJTZWxlY3RvciIsInBvdXBEZWxldGVTZWxlY3RvciIsIm1ldGhvZEdFVCIsIm1ldGhvZFBVVCIsIm1ldGhvZERFTEVURSIsIm1ldGhvZFBBVENIIiwibWV0aG9kUE9TVCIsInVybExpa2VzIiwidXJsTWUiLCJ1cmxDYXJkcyIsInVybEF2YXRhciIsInRva2VuIiwibG9hZGluZ1RleHQiLCJjcmVhdGVDYXJkIiwidXNlciIsImNhcmQiLCJpIiwiYXBpIiwidXBkYXRlTGlrZSIsInRoZW4iLCJyZXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cERlbGV0ZSIsInNldENvbmZpcm1IYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImZpbmFsbHkiLCJvcGVuIiwicG9wdXBXaXRoSW1hZ2UiLCJnZW5lcmF0ZUNhcmQiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwiZm9ybVByb2ZpbGUiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cFByb2ZpbGUiLCJmb3JtUGxhY2UiLCJwb3B1cFBsYWNlIiwiZm9ybUF2YXRhciIsInBvcHVwQXZhdGFyIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiZm9ybURhdGEiLCJzdWJtaXRTdGFydCIsInBhdGNoVXNlckluZm8iLCJzZXRVc2VySW5mbyIsInN1Ym1pdEVuZCIsIlByb21pc2UiLCJhbGwiLCJwb3N0TmV3Q2FyZCIsIsOnaXRlbSIsInBhdGNoVXNlckF2YXRhciIsInVybCIsInNldFVzZXJBdmF0YXIiLCJvcHRpb24iLCJ0eXBlIiwiZmV0Y2giLCJfb3B0aW9uIiwiYmFzZVVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiY2FyZGlkIiwicG9wdXAiLCJfdGV4dCIsIl9zZWFyY2giLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJ1c2VySW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGxhY2UiLCJfc2VhcmNoQ2FyZElkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVuZGVySXRlbXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsImFkZEluaXRpYWxJdGVtcyJdLCJtYXBwaW5ncyI6IjZMQUFxQkEsRSxXQUNqQixXQUFZQyxFQUFRQyxFQUFjQyxFQUFVQyxFQUFhQyxFQUFpQkMsRUFBbUJDLEksNEZBQWdCLFNBQzdHQyxLQUFLQyxRQUFVUixFQUNmTyxLQUFLRSxjQUFnQlIsRUFDckJNLEtBQUtHLFVBQVlSLEVBQ2pCSyxLQUFLSSxhQUFlUixFQUNwQkksS0FBS0ss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LDhDQUNUQyxPQUFRLEdBQ1JDLFFBQVMsQ0FDVEMsY0FBZXhNLEVBQU9xSixNQUN0QixlQUFnQixzQkFJcEJ1QixFQUFZMkMsbUJBQ1p4QyxFQUFVd0MsbUJBQ1Z0QyxFQUFXc0MsbUJBQ1h6QyxFQUFhMEMsb0JBQ2J4QyxFQUFXd0Msb0JBQ1h0QyxFQUFZc0Msb0JBQ1poRCxFQUFlZ0Qsb0JBQ2ZyRCxFQUFZcUQsb0JBQ1pyQyxFQUFTc0MsY0FFVC9CLFFBQVFDLElBQUksQ0FBQ2hDLEVBQUlnQixZQUFZM0ssRUFBT2tKLE1BQU9sSixFQUFPNEksVUFBVzVJLEVBQU9xSixPQUFPTSxFQUFJK0QsZ0JBQWdCMU4sRUFBT21KLFNBQVVuSixFQUFPNEksVUFBVzVJLEVBQU9xSixTQUN4SVEsTUFBSyxZQUF1QixhQUFyQmEsRUFBcUIsS0FBWGlELEVBQVcsS0FDN0JuRSxFQUFLZ0MsWUFBWWQsR0FDakJsQixFQUFLd0MsY0FBY3RCLEdBQ25CaUQsRUFBTS9KLFNBQVEsU0FBQThGLEdBQ2R5QixFQUFTeUMsZ0JBQWdCckUsRUFBV0csRUFBR2dCLFVBQ3RDWCxPQUFNLFNBQUNDLEdBQVNDLFFBQVFDLElBQUlGLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgY2FyZFNlbGVjdG9yLCBjYXJkRGF0YSwgY3VycmVudFVzZXIsIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUNhcmRDbGljayl7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgIHRoaXMuX2N1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIFxuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvciAodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAuY29udGVudFxuICAgICAgICAucXVlcnlTZWxlY3RvciAodGhpcy5fY29uZmlnLmNhcmRTZWxlY3RvcilcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5saWtlU2VsZWN0b3IpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGxhY2VEZWxldGVTZWxlY3RvcikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBsYWNlSW1hZ2VTZWxlY3RvcikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkRGF0YS5saW5rLCB0aGlzLl9jYXJkRGF0YS5uYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVMaWtlKGxpa2VzKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9jb25maWcubGlrZUFjdGl2ZUNsYXNzKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2VzJykudGV4dENvbnRlbnQgPSBsaWtlcy5saWtlcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGxhY2VUaXRsZVNlbGVjdG9yKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGxhY2VJbWFnZVNlbGVjdG9yKS5zcmMgPSB0aGlzLl9jYXJkRGF0YS5saW5rO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBsYWNlSW1hZ2VTZWxlY3RvcikuYWx0ID0gdGhpcy5fY2FyZERhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2VzJykudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICAgIGlmKHRoaXMuX2NhcmREYXRhLmxpa2VzLnNvbWUoaXRlbSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fY3VycmVudFVzZXIuX2lkKSkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UnKS5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5saWtlQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuX2NhcmREYXRhLm93bmVyLl9pZCA9PT0gdGhpcy5fY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19kZWxldGUnKS5jbGFzc0xpc3QuYWRkKCdwbGFjZV9fZGVsZXRlX2FjdGl2ZScpfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuICAgIFxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybUVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKVxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0U2VsZWN0b3IpO1xuICAgICAgICBcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZXJvcnJFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBlcm9yckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9ySW5wdXRDbGFzcyk7XG4gICAgICAgIGVyb3JyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckFjdGl2ZUNsYXNzKTtcbiAgICB9XG4gICAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcm9yckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGVyb3JyRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9ySW5wdXRDbGFzcyk7XG4gICAgICAgIGVyb3JyRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckFjdGl2ZUNsYXNzKTtcbiAgICB9XG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgeyBcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgICAgICB9XG5cbiAgICB0b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgLy8gc2V0RXZlbnRsaXN0ZW5lcnNcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xufVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtpdGVtcyxyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1BcnJheSA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbUFycmF5LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KX1cbiAgICBcbiAgICBhZGRJbml0aWFsSXRlbXMoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcucG9wdXBBY3RpdmVDbGFzcyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLnBvcHVwQWN0aXZlQ2xhc3MpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYoZXZ0LmtleSA9PT0gdGhpcy5fY29uZmlnLkVTQ0FQRV9LRVkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jbG9zZUJ1dHRvblNlbGVjdG9yKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgICAgaWYoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgcG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihjb25maWcsIHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX3BvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucG9wdXBQaG90b0ltZ1NlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBvcHVwUGhvdG9UaXRsZVNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKGltYWdlLCB0aXRsZSkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1nLnNyYyA9IGltYWdlO1xuICAgICAgICB0aGlzLl9wb3B1cEltZy5hbHQgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIH1cbiAgICBcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywge3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgc3VwZXIoY29uZmlnLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5pZF0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG5cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoY29uZmlnLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl90ZXN0KCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0Q29uZmlybUhhbmRsZXIoZnVuYykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVzdCA9IGZ1bmM7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHtuYW1lU2VsZWN0b3Isam9iU2VsZWN0b3IsYXZhdGFyU2VsZWN0b3J9KSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLl91c2VyVmFsdWVzID0ge307XG4gICAgdGhpcy5fdXNlclZhbHVlc1t0aGlzLl9uYW1lLmlkXSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fdXNlclZhbHVlc1t0aGlzLl9qb2IuaWRdID0gdGhpcy5fam9iLnRleHRDb250ZW50O1xuXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJWYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8odXNlcklucHV0KSB7XG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VySW5wdXQubmFtZTtcbiAgICAgICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gdXNlcklucHV0LmFib3V0O1xuICAgICAgICBcbiAgICB9XG5cbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhcklucHV0KSB7XG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXJJbnB1dC5hdmF0YXI7XG4gICAgfSBcblxufSIsImV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvblByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yICgnLnByb2ZpbGVfX2J1dHRvbl90eXBlX3VzZXInKTtcbmV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvblBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wcm9maWxlX19idXR0b25fdHlwZV9wbGFjZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wcm9maWxlX19hdmF0YXInKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yICgnLnBvcHVwX19pbnB1dF9uYW1lJyk7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wb3B1cF9faW5wdXRfam9iJyk7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgZXJyb3JBY3RpdmVDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxuICAgIGVycm9ySW5wdXRDbGFzczogJ3BvcHVwX19pbnB1dF9pbnZhbGlkJyxcbiAgICBlcnJvcklucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0LWVycm9yJyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gICAgc3VibWl0U2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdCcsXG4gICAgcHJvZmlsZUVkaXRvclNlbGVjdG9yOiAnLnByb2ZpbGUtZWRpdG9yJyxcbiAgICBwbGFjZUVkaXRvclNlbGVjdG9yOiAnLnBsYWNlLWVkaXRvcicsXG4gICAgYXZhdGFyRWRpdG9yU2VsZWN0b3I6ICcuYXZhdGFyLWVkaXRvcicsXG4gICAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxuICAgIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX2pvYicsXG4gICAgY2FyZFRlbXBsYXRlRGVmYXVsdDogJy5jYXJkLXRlbXBsYXRlX3R5cGVfZGVmYXVsdCcsXG4gICAgY2FyZHNDb250YWluZXJTZWxlY3RvcjogJy5wbGFjZXMnLFxuICAgIHBvcHVwUGhvdG9TZWxlY3RvcjogJyNwaG90bycsXG4gICAgcG9wdXBQcm9maWxlU2VsZWN0b3I6ICcjcHJvZmlsZScsXG4gICAgcG9wdXBQbGFjZVNlbGVjdG9yOiAnI25ld3BsYWNlJyxcbiAgICBwb3B1cEF2YXRhclNlbGVjdG9yOiAnI2F2YXRhcicsXG4gICAgcG91cERlbGV0ZVNlbGVjdG9yOiAnI2RlbGV0ZScsXG4gICAgY2FyZFNlbGVjdG9yOiAnLnBsYWNlJyxcbiAgICBsaWtlU2VsZWN0b3I6ICcucGxhY2VfX2xpa2UnLFxuICAgIGxpa2VBY3RpdmVDbGFzczogJ3BsYWNlX19saWtlX2FjdGl2ZScsXG4gICAgcGxhY2VEZWxldGVTZWxlY3RvcjogJy5wbGFjZV9fZGVsZXRlJyxcbiAgICBwbGFjZUltYWdlU2VsZWN0b3I6ICcucGxhY2VfX2ltYWdlJyxcbiAgICBwbGFjZVRpdGxlU2VsZWN0b3I6ICcucGxhY2VfX3RpdGxlJyxcbiAgICBwb3B1cEFjdGl2ZUNsYXNzOiAncG9wdXBfb3BlbmVkJyxcbiAgICBFU0NBUEVfS0VZOiAnRXNjYXBlJyxcbiAgICBjbG9zZUJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19jbG9zZScsXG4gICAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICAgIHBvcHVwUGhvdG9JbWdTZWxlY3RvcjogJy5wb3B1cF9faW1nJyxcbiAgICBwb3B1cFBob3RvVGl0bGVTZWxlY3RvcjogJy5wb3B1cF9fdGl0bGUtaW1nJyxcbiAgICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxuICAgIG1ldGhvZEdFVDogJ0dFVCcsXG4gICAgbWV0aG9kUFVUOiAnUFVUJyxcbiAgICBtZXRob2RERUxFVEU6ICdERUxFVEUnLFxuICAgIG1ldGhvZFBBVENIOiAnUEFUQ0gnLFxuICAgIG1ldGhvZFBPU1Q6ICdQT1NUJyxcbiAgICB1cmxMaWtlczogJy9jYXJkcy9saWtlcy8nLFxuICAgIHVybE1lOiAnL3VzZXJzL21lJyxcbiAgICB1cmxDYXJkczogJy9jYXJkcy8nLFxuICAgIHVybEF2YXRhcjogJy91c2Vycy9tZS9hdmF0YXInLFxuICAgIHRva2VuOiAnNGNhZjljNGQtYTMwMi00MTFhLTlmZmEtMmVmMDA2OTlkMjY1JyxcbiAgICBsb2FkaW5nVGV4dDogJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xufVxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuaW1wb3J0IHtwb3B1cEJ1dHRvblByb2ZpbGUscG9wdXBCdXR0b25QbGFjZSxjb25maWcsbmFtZUlucHV0LGpvYklucHV0LCBwb3B1cEJ1dHRvbkF2YXRhcn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0sIHVzZXIpIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoY29uZmlnLCBjb25maWcuY2FyZFRlbXBsYXRlRGVmYXVsdCwgaXRlbSwgdXNlcixcbiAgICAgICAgKCkgPT4geyBcbiAgICAgICAgICAgIGlmKGl0ZW0ubGlrZXMuc29tZShpID0+IGkuX2lkID09PSB1c2VyLl9pZCkpIHtcbiAgICAgICAgICAgICAgICBhcGkudXBkYXRlTGlrZShjb25maWcudXJsTGlrZXMsIGNvbmZpZy5tZXRob2RERUxFVEUsIGNvbmZpZy50b2tlbixpdGVtLl9pZClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlKHJlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGlrZXMgPSByZXMubGlrZXN9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5sb2coZXJyKX0pOztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXBpLnVwZGF0ZUxpa2UoY29uZmlnLnVybExpa2VzLCBjb25maWcubWV0aG9kUFVULCBjb25maWcudG9rZW4saXRlbS5faWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZShyZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxpa2VzID0gcmVzLmxpa2VzO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSk7OyBcbiAgICAgICAgICAgIH19LFxuICAgICAgICAoKSA9PiB7IHBvcHVwRGVsZXRlLnNldENvbmZpcm1IYW5kbGVyKCgpID0+IHtcbiAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNvbmZpZy51cmxDYXJkcywgY29uZmlnLm1ldGhvZERFTEVURSwgY29uZmlnLnRva2VuLCBpdGVtLl9pZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgXG4gICAgICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwb3B1cERlbGV0ZS5vcGVuKCk7XG4gICAgfSAsIChpbWFnZSwgdGl0bGUpID0+IHtcbiAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihpbWFnZSwgdGl0bGUpO1xuICAgIH0pXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGlucHV0UHJvZmlsZVZhbHVlKHVzZXJEYXRhKSB7XG4gICAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0OyBcbn1cblxucG9wdXBCdXR0b25Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIgKCdjbGljaycsKCkgPT4ge1xuICAgIGlucHV0UHJvZmlsZVZhbHVlKHVzZXIuZ2V0VXNlckluZm8oKSk7XG4gICAgZm9ybVByb2ZpbGUucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbn0pO1xuXG5wb3B1cEJ1dHRvblBsYWNlLmFkZEV2ZW50TGlzdGVuZXIgKCdjbGljaycsKCkgPT4ge1xuICAgIGZvcm1QbGFjZS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwb3B1cFBsYWNlLm9wZW4oKTtcbn0pO1xuXG5wb3B1cEJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyICgnY2xpY2snLCgpID0+IHtcbmZvcm1BdmF0YXIucmVzZXRWYWxpZGF0aW9uKCk7XG5wb3B1cEF2YXRhci5vcGVuKCk7XG59KVxuXG5jb25zdCBmb3JtUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLnByb2ZpbGVFZGl0b3JTZWxlY3Rvcik7XG5jb25zdCBmb3JtUGxhY2UgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5wbGFjZUVkaXRvclNlbGVjdG9yKTtcbmNvbnN0IGZvcm1BdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5hdmF0YXJFZGl0b3JTZWxlY3Rvcik7XG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtuYW1lU2VsZWN0b3I6IGNvbmZpZy5uYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yOiBjb25maWcuam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yOiBjb25maWcuYXZhdGFyU2VsZWN0b3J9KTtcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIGl0ZW1zOiBbXSxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgICB9XG59LCBjb25maWcuY2FyZHNDb250YWluZXJTZWxlY3Rvcik7XG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29uZmlnLCBjb25maWcucG9wdXBQaG90b1NlbGVjdG9yKTtcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKGNvbmZpZywge3BvcHVwU2VsZWN0b3I6IGNvbmZpZy5wb3B1cFByb2ZpbGVTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgYXBpLnN1Ym1pdFN0YXJ0KHBvcHVwUHJvZmlsZS5fZm9ybSlcbiAgICBhcGkucGF0Y2hVc2VySW5mbyhjb25maWcudXJsTWUsIGNvbmZpZy5tZXRob2RQQVRDSCwgY29uZmlnLnRva2VuLGZvcm1EYXRhKVxuICAgIC50aGVuKChyZXMpID0+IHsgXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8ocmVzKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgICAgYXBpLnN1Ym1pdEVuZChwb3B1cFByb2ZpbGUuX2Zvcm0pO1xuICAgIH0pXG59fSk7XG5jb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLCB7cG9wdXBTZWxlY3RvcjogY29uZmlnLnBvcHVwUGxhY2VTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBhcGkuc3VibWl0U3RhcnQocG9wdXBQbGFjZS5fZm9ybSk7XG4gICAgUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbyhjb25maWcudXJsTWUsIGNvbmZpZy5tZXRob2RHRVQsIGNvbmZpZy50b2tlbiksYXBpLnBvc3ROZXdDYXJkKGNvbmZpZy51cmxDYXJkcywgY29uZmlnLm1ldGhvZFBPU1QsIGNvbmZpZy50b2tlbiwgw6dpdGVtKV0pXG4gICAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZF0pID0+IHtcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmQsIHVzZXJEYXRhKSk7XG4gICAgICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwUGxhY2UuY2xvc2UoKTtcbiAgICAgICAgYXBpLnN1Ym1pdEVuZChwb3B1cFBsYWNlLl9mb3JtKTtcbiAgICB9KVxufX0pO1xuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcsIHtwb3B1cFNlbGVjdG9yOiBjb25maWcucG9wdXBBdmF0YXJTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgYXBpLnN1Ym1pdFN0YXJ0KHBvcHVwQXZhdGFyLl9mb3JtKTtcbiAgICBhcGkucGF0Y2hVc2VyQXZhdGFyKGNvbmZpZy51cmxBdmF0YXIsIGNvbmZpZy5tZXRob2RQQVRDSCwgY29uZmlnLnRva2VuLCBmb3JtRGF0YS51cmwpXG4gICAgLnRoZW4oKHJlcykgPT4geyBcbiAgICB1c2VyLnNldFVzZXJBdmF0YXIocmVzKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgICAgICBhcGkuc3VibWl0RW5kKHBvcHVwQXZhdGFyLl9mb3JtKTtcbiAgICB9KVxufX0pO1xuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBDb25maXJtKGNvbmZpZywgY29uZmlnLnBvdXBEZWxldGVTZWxlY3Rvcik7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoY29uZmlnLCB7XG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjUnLFxuICAgIG1ldGhvZDogJycsXG4gICAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IGNvbmZpZy50b2tlbixcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxufSk7XG5cbmZvcm1Qcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1QbGFjZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbyhjb25maWcudXJsTWUsIGNvbmZpZy5tZXRob2RHRVQsIGNvbmZpZy50b2tlbiksYXBpLmdldEluaXRpYWxDYXJkcyhjb25maWcudXJsQ2FyZHMsIGNvbmZpZy5tZXRob2RHRVQsIGNvbmZpZy50b2tlbildKVxuLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG51c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbnVzZXIuc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XG5jYXJkcy5mb3JFYWNoKGkgPT4ge1xuY2FyZExpc3QuYWRkSW5pdGlhbEl0ZW1zKGNyZWF0ZUNhcmQoaSwgdXNlckRhdGEpKX0pfSlcbi5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5sb2coZXJyKX0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIG9wdGlvbikge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX29wdGlvbiA9IG9wdGlvbjsgXG4gICAgfVxuXG4gICAgX3NlYXJjaCA9ICh1cmwsIHR5cGUsIHRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9YCx7XG4gICAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH19KVxuICAgIH1cblxuICAgIF9zZWFyY2hDYXJkSWQgPSAodXJsLCB0eXBlLCB0b2tlbiwgY2FyZGlkKSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9JHtjYXJkaWR9YCx7XG4gICAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH19KVxuICAgIH1cblxuICAgIHN1Ym1pdFN0YXJ0ID0gKHBvcHVwKSA9PiB7XG4gICAgdGhpcy5fdGV4dCA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdFNlbGVjdG9yKS50ZXh0Q29udGVudFxuICAgIHBvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdFNlbGVjdG9yKS50ZXh0Q29udGVudCA9IHRoaXMuX2NvbmZpZy5sb2FkaW5nVGV4dDtcbiAgICByZXR1cm4gdGhpcy5fdGV4dFxuICAgIH1cblxuICAgIHN1Ym1pdEVuZCA9IChwb3B1cCkgPT4ge1xuICAgICAgcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0U2VsZWN0b3IpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbyA9ICh1cmwsIHR5cGUsIHRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VhcmNoKHVybCwgdHlwZSwgdG9rZW4pXG4gICAgICAudGhlbigocmVzKSA9PiB7aWYocmVzLm9rKSB7cmV0dXJuIHJlcy5qc29uKCl9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCl9KVxuICAgICAgXG4gIH1cblxuICAgIGdldEluaXRpYWxDYXJkcyA9ICh1cmwsIHR5cGUsIHRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VhcmNoKHVybCwgdHlwZSwgdG9rZW4pXG4gICAgICAudGhlbigocmVzKSA9PiB7aWYocmVzLm9rKSB7cmV0dXJuIHJlcy5qc29uKCl9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCl9KTtcbiAgfVxuXG4gICAgcGF0Y2hVc2VySW5mbyA9ICh1cmwsIHR5cGUsIHRva2VuLCB1c2VySW5mbykgPT4ge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb24uYmFzZVVybH0ke3VybH1gLHtcbiAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgYm9keTogIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogYCR7dXNlckluZm8ubmFtZX1gLFxuICAgICAgICBhYm91dDogYCR7dXNlckluZm8uYWJvdXR9YFxuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtpZihyZXMub2spIHtyZXR1cm4gcmVzLmpzb24oKX1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCl9KTtcbn1cblxuICBwb3N0TmV3Q2FyZCA9ICh1cmwsIHR5cGUsIHRva2VuLCBjYXJkKSA9PiB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbi5iYXNlVXJsfSR7dXJsfWAse1xuICAgICAgbWV0aG9kOiBgJHt0eXBlfWAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IGAke3Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH0sXG4gICAgICBib2R5OiAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBgJHtjYXJkLnBsYWNlfWAsXG4gICAgICAgIGxpbms6IGAke2NhcmQudXJsfWBcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7aWYocmVzLm9rKSB7cmV0dXJuIHJlcy5qc29uKCl9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApfSk7XG59XG5cbiAgZGVsZXRlQ2FyZCA9ICh1cmwsIHR5cGUsIHRva2VuLCBjYXJkaWQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VhcmNoQ2FyZElkKHVybCwgdHlwZSwgdG9rZW4sIGNhcmRpZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtpZihyZXMub2spIHtyZXR1cm4gcmVzLmpzb24oKX1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKX0pO1xuICB9XG5cbiAgdXBkYXRlTGlrZSA9ICh1cmwsIHR5cGUsIHRva2VuLCBjYXJkaWQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VhcmNoQ2FyZElkKHVybCwgdHlwZSwgdG9rZW4sIGNhcmRpZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtpZihyZXMub2spIHtyZXR1cm4gcmVzLmpzb24oKX1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKX0pO1xuICB9XG5cbiAgcGF0Y2hVc2VyQXZhdGFyID0gKHVybCwgdHlwZSwgdG9rZW4sIGF2YXRhcikgPT4ge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb24uYmFzZVVybH0ke3VybH1gLHtcbiAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgYm9keTogIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBgJHthdmF0YXJ9YCxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7aWYocmVzLm9rKSB7cmV0dXJuIHJlcy5qc29uKCl9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApfSk7XG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9