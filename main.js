(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o,r,i,c,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._cardSelector=n,this._cardData=o,this._currentUser=r,this._handleLikeClick=i,this._handleDeleteClick=c,this._handleCardClick=a}var n,o;return n=t,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(this._config.cardSelector).cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(this._config.likeSelector).addEventListener("click",(function(){e._handleLikeClick()})),this._element.querySelector(this._config.placeDeleteSelector).addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(this._config.placeImageSelector).addEventListener("click",(function(){e._handleCardClick(e._cardData.link,e._cardData.name)}))}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"updateLike",value:function(e){this._element.querySelector(".place__like").classList.toggle(this._config.likeActiveClass),this._element.querySelector(".place__likes").textContent=e.likes.length}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._getTemplate(),this._setEventListeners(),this._element.querySelector(this._config.placeTitleSelector).textContent=this._cardData.name,this._element.querySelector(this._config.placeImageSelector).src=this._cardData.link,this._element.querySelector(this._config.placeImageSelector).alt=this._cardData.name,this._element.querySelector(".place__likes").textContent=this._cardData.likes.length,this._cardData.likes.some((function(t){return t._id===e._currentUser._id}))&&this._element.querySelector(".place__like").classList.add(this._config.likeActiveClass),this._cardData.owner._id===this._currentUser._id&&this._element.querySelector(".place__delete").classList.add("place__delete_active"),this._element}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_hideInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",e.classList.remove(r._config.errorInputClass),t.classList.remove(r._config.errorActiveClass)})),o(this,"_showInputError",(function(e){var t=r._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,e.classList.add(r._config.errorInputClass),t.classList.add(r._config.errorActiveClass)})),o(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),o(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),o(this,"toggleButtonState",(function(){r._hasInvalidInput()?r._buttonElement.disabled=!0:r._buttonElement.disabled=!1})),o(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleButtonState()}))}))})),o(this,"enableValidation",(function(){r._setEventListeners()})),this._config=t,this._formElement=document.querySelector(n),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitSelector)}var t,r;return t=e,(r=[{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this.toggleButtonState()}}])&&n(t.prototype,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemArray=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._itemArray.forEach((function(t){e._renderer(t)}))}},{key:"addInitialItems",value:function(e){this._container.append(e)}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._popup=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._config.popupActiveClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._config.popupActiveClass),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.key===this._config.ESCAPE_KEY&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(this._config.closeButtonSelector).addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target===e._popup&&e.close()}))}}])&&a(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(r){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,t))._popupImg=document.querySelector(n._config.popupPhotoImgSelector),n._popupTitle=document.querySelector(n._config.popupPhotoTitleSelector),n}return t=c,(n=[{key:"open",value:function(e,t){f(d(c.prototype),"open",this).call(this),this._popupImg.src=e,this._popupImg.alt=t,this._popupTitle.textContent=t}}])&&s(t.prototype,n),c}(u);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(o);if(r){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function c(e,t){var n,o=t.popupSelector,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,o))._handleFormSubmit=r,n._inputList=n._popup.querySelectorAll(n._config.inputSelector),n._form=n._popup.querySelector(n._config.formSelector),n._submitButton=n._form.querySelector(n._config.submitSelector),n._initialText=n._submitButton.textContent,n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.id]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;v(S(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){v(S(c.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?this._config.loadingText:this._initialText}}])&&m(t.prototype,n),c}(u);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,n,o,r,i=(o=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(o);if(r){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,t))._submitButton=n._popup.querySelector(n._config.submitSelector),n._initialText=n._submitButton.textContent,n}return t=c,(n=[{key:"setEventListeners",value:function(){var e=this;w(j(c.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._confirmHandler()}))}},{key:"setConfirmHandler",value:function(e){return this._confirmHandler=e}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?this._config.loadingText:this._initialText}}])&&C(t.prototype,n),c}(u);function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var T=function(){function e(t){var n=t.nameSelector,o=t.jobSelector,r=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(o),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userValues={},this._userValues[this._name.id]=this._name.textContent,this._userValues[this._job.id]=this._job.textContent,this._userValues}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar}},{key:"getId",value:function(){return this._user}},{key:"setId",value:function(e){return this._user=e}}])&&P(t.prototype,n),e}();function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=document.querySelector(".profile__user-edit"),R=document.querySelector(".profile__place-edit"),x=document.querySelector(".profile__avatar"),U=document.querySelector(".popup__input_name"),D=document.querySelector(".popup__input_job"),V={errorActiveClass:"popup__input-error_active",errorInputClass:"popup__input_invalid",errorInputSelector:".popup__input-error",inputSelector:".popup__input",submitSelector:".popup__submit",profileEditorSelector:".profile-editor",placeEditorSelector:".place-editor",avatarEditorSelector:".avatar-editor",nameSelector:".profile__name",jobSelector:".profile__job",cardTemplateDefault:".card-template_type_default",cardsContainerSelector:".places",popupPhotoSelector:"#photo",popupProfileSelector:"#profile",popupPlaceSelector:"#newplace",popupAvatarSelector:"#avatar",poupDeleteSelector:"#delete",cardSelector:".place",likeSelector:".place__like",likeActiveClass:"place__like_active",placeDeleteSelector:".place__delete",placeImageSelector:".place__image",placeTitleSelector:".place__title",popupActiveClass:"popup_opened",ESCAPE_KEY:"Escape",closeButtonSelector:".popup__close",formSelector:".form",popupPhotoImgSelector:".popup__img",popupPhotoTitleSelector:".popup__title-img",avatarSelector:".profile__avatar",methodGET:"GET",methodPUT:"PUT",methodDELETE:"DELETE",methodPATCH:"PATCH",methodPOST:"POST",urlLikes:"/cards/likes/",urlMe:"/users/me",urlCards:"/cards/",urlAvatar:"/users/me/avatar",token:"4caf9c4d-a302-411a-9ffa-2ef00699d265",loadingText:"Сохранение..."};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function H(e,n){var o=new t(V,V.cardTemplateDefault,e,n,(function(){e.likes.some((function(e){return e._id===n._id}))?W.updateLike(V.urlLikes,V.methodDELETE,V.token,e._id).then((function(t){return o.updateLike(t),e.likes=t.likes})).catch((function(e){console.log(e)})):W.updateLike(V.urlLikes,V.methodPUT,V.token,e._id).then((function(t){return o.updateLike(t),e.likes=t.likes})).catch((function(e){console.log(e)}))}),(function(){Q.setConfirmHandler((function(){Q.renderLoading(!0),W.deleteCard(V.urlCards,V.methodDELETE,V.token,e._id).then((function(){o.deleteCard(),Q.close()})).catch((function(e){console.log(e)})).finally((function(){Q.renderLoading(!1)}))})),Q.open()}),(function(e,t){J.open(e,t)}));return o.generateCard()}A.addEventListener("click",(function(){var e;e=M.getUserInfo(),U.value=e.username,D.value=e.userjob,z.resetValidation(),K.open()})),R.addEventListener("click",(function(){F.resetValidation(),Y.open()})),x.addEventListener("click",(function(){N.resetValidation(),$.open()}));var z=new r(V,V.profileEditorSelector),F=new r(V,V.placeEditorSelector),N=new r(V,V.avatarEditorSelector),M=new T({nameSelector:V.nameSelector,jobSelector:V.jobSelector,avatarSelector:V.avatarSelector}),G=new c({items:[],renderer:function(e){G.addItem(H(e))}},V.cardsContainerSelector),J=new _(V,V.popupPhotoSelector),K=new k(V,{popupSelector:V.popupProfileSelector,handleFormSubmit:function(e){K.renderLoading(!0),W.patchUserInfo(V.urlMe,V.methodPATCH,V.token,e).then((function(e){M.setUserInfo(e),K.close()})).catch((function(e){console.log(e)})).finally((function(){K.renderLoading(!1)}))}}),Y=new k(V,{popupSelector:V.popupPlaceSelector,handleFormSubmit:function(e){Y.renderLoading(!0),W.postNewCard(V.urlCards,V.methodPOST,V.token,e).then((function(e){G.addItem(H(e,M.getId())),Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.renderLoading(!1)}))}}),$=new k(V,{popupSelector:V.popupAvatarSelector,handleFormSubmit:function(e){$.renderLoading(!0),W.patchUserAvatar(V.urlAvatar,V.methodPATCH,V.token,e["url-avatar"]).then((function(e){M.setUserAvatar(e),$.close()})).catch((function(e){console.log(e)})).finally((function(){$.renderLoading(!1)}))}}),Q=new I(V,V.poupDeleteSelector),W=new function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"_search",(function(e,t,n){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"}})})),q(this,"_searchCardId",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e).concat(r),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"}})})),q(this,"_checkResponse",(function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))})),q(this,"getUserInfo",(function(e,t,n){return o._search(e,t,n).then((function(e){return o._checkResponse(e)}))})),q(this,"getInitialCards",(function(e,t,n){return o._search(e,t,n).then((function(e){return o._checkResponse(e)}))})),q(this,"patchUserInfo",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(r.name),about:"".concat(r.about)})}).then((function(e){return o._checkResponse(e)}))})),q(this,"postNewCard",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(r.place),link:"".concat(r.url)})}).then((function(e){return o._checkResponse(e)}))})),q(this,"deleteCard",(function(e,t,n,r){return o._searchCardId(e,t,n,r).then((function(e){return o._checkResponse(e)}))})),q(this,"updateLike",(function(e,t,n,r){return o._searchCardId(e,t,n,r).then((function(e){return o._checkResponse(e)}))})),q(this,"patchUserAvatar",(function(e,t,n,r){return fetch("".concat(o._option.baseUrl).concat(e),{method:"".concat(t),headers:{authorization:"".concat(n),"Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(r)})}).then((function(e){return o._checkResponse(e)}))})),this._config=t,this._option=n}(V,{baseUrl:"https://mesto.nomoreparties.co/v1/cohort-25",method:"",headers:{authorization:V.token,"Content-Type":"application/json"}});z.enableValidation(),F.enableValidation(),N.enableValidation(),K.setEventListeners(),Y.setEventListeners(),$.setEventListeners(),J.setEventListeners(),Q.setEventListeners(),G.renderItems(),Promise.all([W.getUserInfo(V.urlMe,V.methodGET,V.token),W.getInitialCards(V.urlCards,V.methodGET,V.token)]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var o,r,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);c=!0);}catch(e){a=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],i=o[1];M.setUserInfo(r),M.setUserAvatar(r),M.setId(r),i.forEach((function(e){G.addInitialItems(H(e,r))}))})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25maWciLCJjYXJkU2VsZWN0b3IiLCJjYXJkRGF0YSIsImN1cnJlbnRVc2VyIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2NvbmZpZyIsIl9jYXJkU2VsZWN0b3IiLCJfY2FyZERhdGEiLCJfY3VycmVudFVzZXIiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsImxpa2VTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGFjZURlbGV0ZVNlbGVjdG9yIiwicGxhY2VJbWFnZVNlbGVjdG9yIiwibGluayIsIm5hbWUiLCJyZW1vdmUiLCJsaWtlcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxpa2VBY3RpdmVDbGFzcyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicGxhY2VUaXRsZVNlbGVjdG9yIiwic3JjIiwiYWx0Iiwic29tZSIsIml0ZW0iLCJfaWQiLCJhZGQiLCJvd25lciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVyb3JyRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiZXJyb3JJbnB1dENsYXNzIiwiZXJyb3JBY3RpdmVDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9pbnB1dExpc3QiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdFNlbGVjdG9yIiwiaW5wdXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1BcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJwb3B1cEFjdGl2ZUNsYXNzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIkVTQ0FQRV9LRVkiLCJjbG9zZSIsImNsb3NlQnV0dG9uU2VsZWN0b3IiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltZyIsInBvcHVwUGhvdG9JbWdTZWxlY3RvciIsIl9wb3B1cFRpdGxlIiwicG9wdXBQaG90b1RpdGxlU2VsZWN0b3IiLCJpbWFnZSIsInRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiZm9ybVNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbml0aWFsVGV4dCIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJQb3B1cENvbmZpcm0iLCJfY29uZmlybUhhbmRsZXIiLCJmdW5jIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWUiLCJfam9iIiwiX2F2YXRhciIsIl91c2VyVmFsdWVzIiwidXNlcklucHV0IiwiYWJvdXQiLCJhdmF0YXJJbnB1dCIsImF2YXRhciIsIl91c2VyIiwidXNlciIsInBvcHVwQnV0dG9uUHJvZmlsZSIsInBvcHVwQnV0dG9uUGxhY2UiLCJwb3B1cEJ1dHRvbkF2YXRhciIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZXJyb3JJbnB1dFNlbGVjdG9yIiwicHJvZmlsZUVkaXRvclNlbGVjdG9yIiwicGxhY2VFZGl0b3JTZWxlY3RvciIsImF2YXRhckVkaXRvclNlbGVjdG9yIiwiY2FyZFRlbXBsYXRlRGVmYXVsdCIsImNhcmRzQ29udGFpbmVyU2VsZWN0b3IiLCJwb3B1cFBob3RvU2VsZWN0b3IiLCJwb3B1cFByb2ZpbGVTZWxlY3RvciIsInBvcHVwUGxhY2VTZWxlY3RvciIsInBvcHVwQXZhdGFyU2VsZWN0b3IiLCJwb3VwRGVsZXRlU2VsZWN0b3IiLCJtZXRob2RHRVQiLCJtZXRob2RQVVQiLCJtZXRob2RERUxFVEUiLCJtZXRob2RQQVRDSCIsIm1ldGhvZFBPU1QiLCJ1cmxMaWtlcyIsInVybE1lIiwidXJsQ2FyZHMiLCJ1cmxBdmF0YXIiLCJ0b2tlbiIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiaSIsImFwaSIsInVwZGF0ZUxpa2UiLCJ0aGVuIiwicmVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBEZWxldGUiLCJzZXRDb25maXJtSGFuZGxlciIsInJlbmRlckxvYWRpbmciLCJkZWxldGVDYXJkIiwiZmluYWxseSIsIm9wZW4iLCJwb3B1cFdpdGhJbWFnZSIsImdlbmVyYXRlQ2FyZCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJ1c2VybmFtZSIsInVzZXJqb2IiLCJmb3JtUHJvZmlsZSIsInJlc2V0VmFsaWRhdGlvbiIsInBvcHVwUHJvZmlsZSIsImZvcm1QbGFjZSIsInBvcHVwUGxhY2UiLCJmb3JtQXZhdGFyIiwicG9wdXBBdmF0YXIiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJmb3JtRGF0YSIsInBhdGNoVXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvc3ROZXdDYXJkIiwiZ2V0SWQiLCJwYXRjaFVzZXJBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwib3B0aW9uIiwidXJsIiwidHlwZSIsImZldGNoIiwiX29wdGlvbiIsImJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImNhcmRpZCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfc2VhcmNoIiwiX2NoZWNrUmVzcG9uc2UiLCJ1c2VySW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGxhY2UiLCJfc2VhcmNoQ2FyZElkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVuZGVySXRlbXMiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInNldElkIiwiYWRkSW5pdGlhbEl0ZW1zIl0sIm1hcHBpbmdzIjoiNkxBQXFCQSxFLFdBQ2pCLFdBQVlDLEVBQVFDLEVBQWNDLEVBQVVDLEVBQWFDLEVBQWlCQyxFQUFtQkMsSSw0RkFBZ0IsU0FDN0dDLEtB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RUFBV2tDLG1CQUNYckMsRUFBYXNDLG9CQUNicEMsRUFBV29DLG9CQUNYbEMsRUFBWWtDLG9CQUNaOUMsRUFBZThDLG9CQUNmcEQsRUFBWW9ELG9CQUNaakMsRUFBU2tDLGNBRVRiLFFBQVFjLElBQUksQ0FBQzlELEVBQUlpQixZQUFZaEwsRUFBT3dKLE1BQU94SixFQUFPa0osVUFBV2xKLEVBQU8ySixPQUFPSSxFQUFJK0QsZ0JBQWdCOU4sRUFBT3lKLFNBQVV6SixFQUFPa0osVUFBV2xKLEVBQU8ySixTQUN4SU0sTUFBSyxZQUF1QixJLElBQUEsRyxFQUFBLEUsNENBQUEsSSx3d0JBQXJCYyxFQUFxQixLQUFYZ0QsRUFBVyxLQUM3QjlGLEVBQUs2RCxZQUFZZixHQUNqQjlDLEVBQUtpRSxjQUFjbkIsR0FDbkI5QyxFQUFLK0YsTUFBTWpELEdBQ1hnRCxFQUFNbkssU0FBUSxTQUFBa0csR0FDZDRCLEVBQVN1QyxnQkFBZ0JyRSxFQUFXRSxFQUFHaUIsVUFDdENaLE9BQU0sU0FBQ0MsR0FBU0MsUUFBUUMsSUFBSUYsTyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBjYXJkU2VsZWN0b3IsIGNhcmREYXRhLCBjdXJyZW50VXNlciwgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlQ2FyZENsaWNrKXtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XG4gICAgdGhpcy5fY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgXG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yICh0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgIC5jb250ZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yICh0aGlzLl9jb25maWcuY2FyZFNlbGVjdG9yKVxuICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmxpa2VTZWxlY3RvcikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wbGFjZURlbGV0ZVNlbGVjdG9yKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGxhY2VJbWFnZVNlbGVjdG9yKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmREYXRhLmxpbmssIHRoaXMuX2NhcmREYXRhLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZUxpa2UobGlrZXMpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UnKS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2NvbmZpZy5saWtlQWN0aXZlQ2xhc3MpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZXMnKS50ZXh0Q29udGVudCA9IGxpa2VzLmxpa2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wbGFjZVRpdGxlU2VsZWN0b3IpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wbGFjZUltYWdlU2VsZWN0b3IpLnNyYyA9IHRoaXMuX2NhcmREYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGxhY2VJbWFnZVNlbGVjdG9yKS5hbHQgPSB0aGlzLl9jYXJkRGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZXMnKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgaWYodGhpcy5fY2FyZERhdGEubGlrZXMuc29tZShpdGVtID0+IGl0ZW0uX2lkID09PSB0aGlzLl9jdXJyZW50VXNlci5faWQpKSB7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmxpa2VBY3RpdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5fY2FyZERhdGEub3duZXIuX2lkID09PSB0aGlzLl9jdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2RlbGV0ZScpLmNsYXNzTGlzdC5hZGQoJ3BsYWNlX19kZWxldGVfYWN0aXZlJyl9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG4gICAgXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcikpXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRTZWxlY3Rvcik7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfVxuXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcm9yckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGVyb3JyRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JJbnB1dENsYXNzKTtcbiAgICAgICAgZXJvcnJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVyb3JyRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgZXJvcnJFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JJbnB1dENsYXNzKTtcbiAgICAgICAgZXJvcnJFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpZihpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7IFxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gICAgICAgIH1cblxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICAvLyBzZXRFdmVudGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG59XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbUFycmF5ID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9pdGVtQXJyYXkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pfVxuICAgIFxuICAgIGFkZEluaXRpYWxJdGVtcyhlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5wb3B1cEFjdGl2ZUNsYXNzKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcucG9wdXBBY3RpdmVDbGFzcyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZihldnQua2V5ID09PSB0aGlzLl9jb25maWcuRVNDQVBFX0tFWSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNsb3NlQnV0dG9uU2VsZWN0b3IpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgICBpZihldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZywgcG9wdXBTZWxlY3RvcilcbiAgICAgICAgdGhpcy5fcG9wdXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5wb3B1cFBob3RvSW1nU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucG9wdXBQaG90b1RpdGxlU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIG9wZW4oaW1hZ2UsIHRpdGxlKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWcuc3JjID0gaW1hZ2U7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1nLmFsdCA9IHRpdGxlO1xuICAgICAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIFxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCB7cG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdH0pIHtcbiAgICBzdXBlcihjb25maWcsIHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2luaXRpYWxUZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH1cblxuICAgIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgICAgIGlmKGlzTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fY29uZmlnLmxvYWRpbmdUZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5faW5pdGlhbFRleHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoY29uZmlnLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRTZWxlY3Rvcik7XG4gICAgdGhpcy5faW5pdGlhbFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5fY29uZmlybUhhbmRsZXIoKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXRDb25maXJtSGFuZGxlcihmdW5jKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maXJtSGFuZGxlciA9IGZ1bmM7XG4gICAgfVxuXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9jb25maWcubG9hZGluZ1RleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9pbml0aWFsVGV4dDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLGpvYlNlbGVjdG9yLGF2YXRhclNlbGVjdG9yfSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fdXNlclZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX3VzZXJWYWx1ZXNbdGhpcy5fbmFtZS5pZF0gPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgIHRoaXMuX3VzZXJWYWx1ZXNbdGhpcy5fam9iLmlkXSA9IHRoaXMuX2pvYi50ZXh0Q29udGVudDtcblxuICAgIHJldHVybiB0aGlzLl91c2VyVmFsdWVzO1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHVzZXJJbnB1dCkge1xuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlcklucHV0Lm5hbWU7XG4gICAgICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IHVzZXJJbnB1dC5hYm91dDtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgc2V0VXNlckF2YXRhcihhdmF0YXJJbnB1dCkge1xuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFySW5wdXQuYXZhdGFyO1xuICAgIH1cblxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlcjtcbiAgICB9XG5cbiAgICBzZXRJZCh1c2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyID0gdXNlcjtcbiAgICB9XG5cbn0iLCJleHBvcnQgY29uc3QgcG9wdXBCdXR0b25Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wcm9maWxlX191c2VyLWVkaXQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvblBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wcm9maWxlX19wbGFjZS1lZGl0Jyk7XG5leHBvcnQgY29uc3QgcG9wdXBCdXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yICgnLnByb2ZpbGVfX2F2YXRhcicpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgKCcucG9wdXBfX2lucHV0X25hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yICgnLnBvcHVwX19pbnB1dF9qb2InKTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBlcnJvckFjdGl2ZUNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXG4gICAgZXJyb3JJbnB1dENsYXNzOiAncG9wdXBfX2lucHV0X2ludmFsaWQnLFxuICAgIGVycm9ySW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQtZXJyb3InLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgICBzdWJtaXRTZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0JyxcbiAgICBwcm9maWxlRWRpdG9yU2VsZWN0b3I6ICcucHJvZmlsZS1lZGl0b3InLFxuICAgIHBsYWNlRWRpdG9yU2VsZWN0b3I6ICcucGxhY2UtZWRpdG9yJyxcbiAgICBhdmF0YXJFZGl0b3JTZWxlY3RvcjogJy5hdmF0YXItZWRpdG9yJyxcbiAgICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gICAgam9iU2VsZWN0b3I6ICcucHJvZmlsZV9fam9iJyxcbiAgICBjYXJkVGVtcGxhdGVEZWZhdWx0OiAnLmNhcmQtdGVtcGxhdGVfdHlwZV9kZWZhdWx0JyxcbiAgICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yOiAnLnBsYWNlcycsXG4gICAgcG9wdXBQaG90b1NlbGVjdG9yOiAnI3Bob3RvJyxcbiAgICBwb3B1cFByb2ZpbGVTZWxlY3RvcjogJyNwcm9maWxlJyxcbiAgICBwb3B1cFBsYWNlU2VsZWN0b3I6ICcjbmV3cGxhY2UnLFxuICAgIHBvcHVwQXZhdGFyU2VsZWN0b3I6ICcjYXZhdGFyJyxcbiAgICBwb3VwRGVsZXRlU2VsZWN0b3I6ICcjZGVsZXRlJyxcbiAgICBjYXJkU2VsZWN0b3I6ICcucGxhY2UnLFxuICAgIGxpa2VTZWxlY3RvcjogJy5wbGFjZV9fbGlrZScsXG4gICAgbGlrZUFjdGl2ZUNsYXNzOiAncGxhY2VfX2xpa2VfYWN0aXZlJyxcbiAgICBwbGFjZURlbGV0ZVNlbGVjdG9yOiAnLnBsYWNlX19kZWxldGUnLFxuICAgIHBsYWNlSW1hZ2VTZWxlY3RvcjogJy5wbGFjZV9faW1hZ2UnLFxuICAgIHBsYWNlVGl0bGVTZWxlY3RvcjogJy5wbGFjZV9fdGl0bGUnLFxuICAgIHBvcHVwQWN0aXZlQ2xhc3M6ICdwb3B1cF9vcGVuZWQnLFxuICAgIEVTQ0FQRV9LRVk6ICdFc2NhcGUnLFxuICAgIGNsb3NlQnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2Nsb3NlJyxcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gICAgcG9wdXBQaG90b0ltZ1NlbGVjdG9yOiAnLnBvcHVwX19pbWcnLFxuICAgIHBvcHVwUGhvdG9UaXRsZVNlbGVjdG9yOiAnLnBvcHVwX190aXRsZS1pbWcnLFxuICAgIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcicsXG4gICAgbWV0aG9kR0VUOiAnR0VUJyxcbiAgICBtZXRob2RQVVQ6ICdQVVQnLFxuICAgIG1ldGhvZERFTEVURTogJ0RFTEVURScsXG4gICAgbWV0aG9kUEFUQ0g6ICdQQVRDSCcsXG4gICAgbWV0aG9kUE9TVDogJ1BPU1QnLFxuICAgIHVybExpa2VzOiAnL2NhcmRzL2xpa2VzLycsXG4gICAgdXJsTWU6ICcvdXNlcnMvbWUnLFxuICAgIHVybENhcmRzOiAnL2NhcmRzLycsXG4gICAgdXJsQXZhdGFyOiAnL3VzZXJzL21lL2F2YXRhcicsXG4gICAgdG9rZW46ICc0Y2FmOWM0ZC1hMzAyLTQxMWEtOWZmYS0yZWYwMDY5OWQyNjUnLFxuICAgIGxvYWRpbmdUZXh0OiAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJ1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0nO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaSc7XG5pbXBvcnQge3BvcHVwQnV0dG9uUHJvZmlsZSxwb3B1cEJ1dHRvblBsYWNlLGNvbmZpZyxuYW1lSW5wdXQsam9iSW5wdXQsIHBvcHVwQnV0dG9uQXZhdGFyfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSwgdXNlcikge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjb25maWcsIGNvbmZpZy5jYXJkVGVtcGxhdGVEZWZhdWx0LCBpdGVtLCB1c2VyLFxuICAgICAgICAoKSA9PiB7IFxuICAgICAgICAgICAgaWYoaXRlbS5saWtlcy5zb21lKGkgPT4gaS5faWQgPT09IHVzZXIuX2lkKSkge1xuICAgICAgICAgICAgICAgIGFwaS51cGRhdGVMaWtlKGNvbmZpZy51cmxMaWtlcywgY29uZmlnLm1ldGhvZERFTEVURSwgY29uZmlnLnRva2VuLGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2UocmVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5saWtlcyA9IHJlcy5saWtlc30pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSk7O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcGkudXBkYXRlTGlrZShjb25maWcudXJsTGlrZXMsIGNvbmZpZy5tZXRob2RQVVQsIGNvbmZpZy50b2tlbixpdGVtLl9pZClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlKHJlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGlrZXMgPSByZXMubGlrZXM7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KTs7IFxuICAgICAgICAgICAgfX0sXG4gICAgICAgICgpID0+IHsgcG9wdXBEZWxldGUuc2V0Q29uZmlybUhhbmRsZXIoKCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBEZWxldGUucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNvbmZpZy51cmxDYXJkcywgY29uZmlnLm1ldGhvZERFTEVURSwgY29uZmlnLnRva2VuLCBpdGVtLl9pZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgXG4gICAgICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwb3B1cERlbGV0ZS5vcGVuKCk7XG4gICAgfSAsIChpbWFnZSwgdGl0bGUpID0+IHtcbiAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihpbWFnZSwgdGl0bGUpO1xuICAgIH0pXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGlucHV0UHJvZmlsZVZhbHVlKHVzZXJEYXRhKSB7XG4gICAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEudXNlcm5hbWU7XG4gICAgam9iSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2Vyam9iOyBcbn1cblxucG9wdXBCdXR0b25Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIgKCdjbGljaycsKCkgPT4ge1xuICAgIGlucHV0UHJvZmlsZVZhbHVlKHVzZXIuZ2V0VXNlckluZm8oKSk7XG4gICAgZm9ybVByb2ZpbGUucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbn0pO1xuXG5wb3B1cEJ1dHRvblBsYWNlLmFkZEV2ZW50TGlzdGVuZXIgKCdjbGljaycsKCkgPT4ge1xuICAgIGZvcm1QbGFjZS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwb3B1cFBsYWNlLm9wZW4oKTtcbn0pO1xuXG5wb3B1cEJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyICgnY2xpY2snLCgpID0+IHtcbiAgICBmb3JtQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcbn0pXG5cbmNvbnN0IGZvcm1Qcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcucHJvZmlsZUVkaXRvclNlbGVjdG9yKTtcbmNvbnN0IGZvcm1QbGFjZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLnBsYWNlRWRpdG9yU2VsZWN0b3IpO1xuY29uc3QgZm9ybUF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLmF2YXRhckVkaXRvclNlbGVjdG9yKTtcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe25hbWVTZWxlY3RvcjogY29uZmlnLm5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3I6IGNvbmZpZy5qb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3I6IGNvbmZpZy5hdmF0YXJTZWxlY3Rvcn0pO1xuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgaXRlbXM6IFtdLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgIH1cbn0sIGNvbmZpZy5jYXJkc0NvbnRhaW5lclNlbGVjdG9yKTtcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShjb25maWcsIGNvbmZpZy5wb3B1cFBob3RvU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLCB7cG9wdXBTZWxlY3RvcjogY29uZmlnLnBvcHVwUHJvZmlsZVNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcbiAgICBwb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICBhcGkucGF0Y2hVc2VySW5mbyhjb25maWcudXJsTWUsIGNvbmZpZy5tZXRob2RQQVRDSCwgY29uZmlnLnRva2VuLGZvcm1EYXRhKVxuICAgIC50aGVuKChyZXMpID0+IHsgXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBQcm9maWxlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59fSk7XG5jb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLCB7cG9wdXBTZWxlY3RvcjogY29uZmlnLnBvcHVwUGxhY2VTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBwb3B1cFBsYWNlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLnBvc3ROZXdDYXJkKGNvbmZpZy51cmxDYXJkcywgY29uZmlnLm1ldGhvZFBPU1QsIGNvbmZpZy50b2tlbiwgaXRlbSlcbiAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCwgdXNlci5nZXRJZCgpKSk7XG4gICAgICAgIHBvcHVwUGxhY2UuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBQbGFjZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufX0pO1xuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcsIHtwb3B1cFNlbGVjdG9yOiBjb25maWcucG9wdXBBdmF0YXJTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICBhcGkucGF0Y2hVc2VyQXZhdGFyKGNvbmZpZy51cmxBdmF0YXIsIGNvbmZpZy5tZXRob2RQQVRDSCwgY29uZmlnLnRva2VuLCBmb3JtRGF0YVsndXJsLWF2YXRhciddKVxuICAgIC50aGVuKChyZXMpID0+IHsgXG4gICAgICAgIHVzZXIuc2V0VXNlckF2YXRhcihyZXMpO1xuICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59fSk7XG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cENvbmZpcm0oY29uZmlnLCBjb25maWcucG91cERlbGV0ZVNlbGVjdG9yKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaShjb25maWcsIHtcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNScsXG4gICAgbWV0aG9kOiAnJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogY29uZmlnLnRva2VuLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG59KTtcblxuZm9ybVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybVBsYWNlLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1BdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKGNvbmZpZy51cmxNZSwgY29uZmlnLm1ldGhvZEdFVCwgY29uZmlnLnRva2VuKSxhcGkuZ2V0SW5pdGlhbENhcmRzKGNvbmZpZy51cmxDYXJkcywgY29uZmlnLm1ldGhvZEdFVCwgY29uZmlnLnRva2VuKV0pXG4udGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbnVzZXIuc2V0VXNlckluZm8odXNlckRhdGEpO1xudXNlci5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcbnVzZXIuc2V0SWQodXNlckRhdGEpO1xuY2FyZHMuZm9yRWFjaChpID0+IHtcbmNhcmRMaXN0LmFkZEluaXRpYWxJdGVtcyhjcmVhdGVDYXJkKGksIHVzZXJEYXRhKSl9KX0pXG4uY2F0Y2goKGVycikgPT4ge2NvbnNvbGUubG9nKGVycil9KTtcblxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIG9wdGlvbikge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX29wdGlvbiA9IG9wdGlvbjsgXG4gICAgfVxuXG4gICAgX3NlYXJjaCA9ICh1cmwsIHR5cGUsIHRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9YCx7XG4gICAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH19KVxuICAgIH1cblxuICAgIF9zZWFyY2hDYXJkSWQgPSAodXJsLCB0eXBlLCB0b2tlbiwgY2FyZGlkKSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9JHtjYXJkaWR9YCx7XG4gICAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH19KVxuICAgIH1cblxuICAgIF9jaGVja1Jlc3BvbnNlID0gKHJlcykgPT4ge1xuICAgICAgaWYocmVzLm9rKSB7cmV0dXJuIHJlcy5qc29uKCl9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbyA9ICh1cmwsIHR5cGUsIHRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VhcmNoKHVybCwgdHlwZSwgdG9rZW4pXG4gICAgICAudGhlbigocmVzKSA9PiB7cmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKX0pXG4gICAgICBcbiAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzID0gKHVybCwgdHlwZSwgdG9rZW4pID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9zZWFyY2godXJsLCB0eXBlLCB0b2tlbilcbiAgICAgIC50aGVuKChyZXMpID0+IHtyZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpfSk7XG4gIH1cblxuICAgIHBhdGNoVXNlckluZm8gPSAodXJsLCB0eXBlLCB0b2tlbiwgdXNlckluZm8pID0+IHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9YCx7XG4gICAgICBtZXRob2Q6IGAke3R5cGV9YCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfSxcbiAgICAgIGJvZHk6ICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGAke3VzZXJJbmZvLm5hbWV9YCxcbiAgICAgICAgYWJvdXQ6IGAke3VzZXJJbmZvLmFib3V0fWBcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7cmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKX0pO1xufVxuXG4gIHBvc3ROZXdDYXJkID0gKHVybCwgdHlwZSwgdG9rZW4sIGNhcmQpID0+IHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9uLmJhc2VVcmx9JHt1cmx9YCx7XG4gICAgICBtZXRob2Q6IGAke3R5cGV9YCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dG9rZW59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfSxcbiAgICAgIGJvZHk6ICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGAke2NhcmQucGxhY2V9YCxcbiAgICAgICAgbGluazogYCR7Y2FyZC51cmx9YFxuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtyZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpfSk7XG59XG5cbiAgZGVsZXRlQ2FyZCA9ICh1cmwsIHR5cGUsIHRva2VuLCBjYXJkaWQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VhcmNoQ2FyZElkKHVybCwgdHlwZSwgdG9rZW4sIGNhcmRpZClcbiAgICAudGhlbigocmVzKSA9PiB7cmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKX0pO1xuICB9XG5cbiAgdXBkYXRlTGlrZSA9ICh1cmwsIHR5cGUsIHRva2VuLCBjYXJkaWQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VhcmNoQ2FyZElkKHVybCwgdHlwZSwgdG9rZW4sIGNhcmRpZClcbiAgICAudGhlbigocmVzKSA9PiB7cmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKX0pO1xuICB9XG5cbiAgcGF0Y2hVc2VyQXZhdGFyID0gKHVybCwgdHlwZSwgdG9rZW4sIGF2YXRhcikgPT4ge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb24uYmFzZVVybH0ke3VybH1gLHtcbiAgICAgIG1ldGhvZDogYCR7dHlwZX1gLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgYm9keTogIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBgJHthdmF0YXJ9YCxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7cmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKX0pO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==